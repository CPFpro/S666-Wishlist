<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SLAVE 666 HOGTIE WISHLIST</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      max-width: 720px;
      margin: 2rem auto;
      padding: 1rem;
      background: #0f0f11;
      color: #e5e5e5;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      color: #ff0000;
      margin-bottom: 1.5rem;
      font-size: 2.8rem;
    }
    .card {
      background: #1a1a1e;
      padding: 2rem;
      border-radius: 12px;
      border: 1px solid #333;
      box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    }
    label {
      display: block;
      margin: 1.4rem 0 0.4rem;
      font-weight: 500;
      color: #d4d4d8;
    }
    input[type="text"], input[type="password"], select, textarea, input[type="hidden"] {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #444;
      border-radius: 6px;
      background: #111;
      color: #fff;
      font-size: 1rem;
    }
    textarea#persoenliche_anmerkungen,
    textarea#extreme_eigener_wunsch {
      background: #0d0d0f;
      border: 1px solid #555;
      min-height: 120px;
      resize: vertical;
    }
    textarea:focus {
      border-color: #ff0000;
      outline: none;
    }
    .checkbox-group label {
      display: flex;
      align-items: center;
      margin: 0.5rem 0;
      cursor: pointer;
    }
    input[type="checkbox"], input[type="radio"] {
      width: auto;
      height: 1.3em;
      margin-right: 0.9rem;
      accent-color: #ff0000;
    }
    input[type="checkbox"][disabled] {
      opacity: 0.7;
      cursor: not-allowed;
    }
    button {
      margin-top: 2.5rem;
      padding: 1rem;
      font-size: 1.1rem;
      background: #ff0000;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
    }
    button:disabled {
      background: #4a1a1a;
      cursor: not-allowed;
      opacity: 0.6;
    }
    .error {
      color: #ff4d4d;
      font-weight: bold;
      margin: 0.5rem 0;
      display: none;
    }
    .extreme-warning {
      background: #2a0000;
      border: 2px solid #ff0000;
      padding: 1rem;
      border-radius: 8px;
      margin: 1rem 0;
      display: none;
    }
    #countdown {
      color: #ffcc00;
      font-weight: bold;
      margin-top: 0.8rem;
      display: none;
    }
    .extreme-info {
      color: #ffcc00;
      background: #2a1a00;
      padding: 1rem;
      border-radius: 6px;
      margin: 0.8rem 0 1.5rem;
      font-weight: bold;
    }
    #noSafewordConfirmation {
      display: none;
      margin: 1.5rem 0;
      padding: 1.2rem;
      background: #2a1a20;
      border-left: 4px solid #ff0000;
      border-radius: 6px;
    }
    #noSafewordConfirmation.show {
      display: block;
    }
    .warning-text {
      color: #ffcc00;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    .section-title {
      color: #ff0000;
      margin: 2.2rem 0 1rem;
      font-size: 1.5rem;
    }
    #codeSection {
      margin: 1.5rem 0;
      padding: 1rem;
      background: #1a1a1e;
      border-radius: 8px;
      border: 1px solid #444;
    }
    #anmerkungenSection {
      margin: 2rem 0 1rem;
      padding: 1rem;
      background: #111;
      border: 1px solid #555;
      border-radius: 8px;
    }
  </style>
</head>
<body>

  <h1>SLAVE 666 HOGTIE WISHLIST</h1>

  <div class="card">

    <form id="wishlistForm" action="https://api.web3forms.com/submit" method="POST">

      <input type="hidden" name="access_key" value="c4cae7a5-ae0f-4b4a-80ec-4f4c29f37185">
      <input type="hidden" name="subject" value="SLAVE 666 HOGTIE WISHLIST – Neue Einsendung">

      <!-- Verstecktes Feld → alle ausgewählten Extreme-Optionen landen hier und in der E-Mail -->
      <input type="hidden" name="extreme_options" id="extreme_options_hidden" value="">

      <label for="name">Trage hier deinen Namen nochmal ein</label>
      <input type="text" id="name" name="Name" required placeholder="Sklavin 666">

      <div class="section-title">Deine primäre Rolle</div>
      <div class="checkbox-group">
        <label><input type="radio" name="Rolle" value="SUBMISSIV" required> SUBMISSIV</label>
        <label><input type="radio" name="Rolle" value="DOMINANT"> DOMINANT</label>
      </div>
      <div id="rolleError" class="error"></div>

      <div class="section-title">OUTFIT</div>
      <div class="checkbox-group">
        <label><input type="checkbox" name="Outfit[]" value="Catsuit Gold"> Catsuit Gold, Unterbrustkorsett Lack Schwarz</label>
        <label><input type="checkbox" name="Outfit[]" value="Catsuit Grau"> Catsuit Grau, Unterbrustkorsett Lack Schwarz</label>
        <label><input type="checkbox" name="Outfit[]" value="Catsuit Schwarz"> Catsuit Schwarz, Unterbrustkorsett Lack Schwarz</label>
      </div>

      <div class="section-title">OUTFIT OPTIONEN</div>
      <div class="checkbox-group">
        <label><input type="checkbox" name="OutfitOptionen[]" value="Balletheels"> Balletheels</label>
        <label><input type="checkbox" name="OutfitOptionen[]" value="HighHeelPumps mit Nylonfuß"> HighHeelPumps mit Nylonfuß</label>
        <label><input type="checkbox" name="OutfitOptionen[]" value="Halsband Leder"> Halsband Leder</label>
        <label><input type="checkbox" name="OutfitOptionen[]" value="Halsband Eisen"> Halsband Eisen</label>
      </div>

      <label for="gravur">Gravur für Halsband</label>
      <input type="text" id="gravur" name="Halsband Gravur" placeholder="">

      <div class="section-title">BONDAGE</div>
      <p style="margin: 0.5rem 0 1rem; font-weight: bold; font-size: 1.2rem; color: #ff4d4d;">
        BASIS HOGTIE mit Handgelenk und Knöchel Fesselung
      </p>
      <div class="checkbox-group">
        <label><input type="checkbox" name="BondageOptionen[]" value="Ballgagharness"> Ballgagharness</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Kniefesslung"> Kniefesslung</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Oberschenkelfesslung"> Oberschenkelfesslung</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Torsofesselung"> Torsofesselung</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Brustfesslung"> Brustfesslung</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Taille"> Taille</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Taille mit festem Schrittseil"> Taille mit festem Schrittseil</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Schrittseil mit Verbindung zu Händen"> Schrittseil mit Verbindung zu Händen</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Schrittseil mit Verbindung zu Füßen"> Schrittseil mit Verbindung zu Füßen</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Schrittseil mit Verbindung zum Kopf"> Schrittseil mit Verbindung zum Kopf</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Schrittseil mit Verbindung zum Hals"> Schrittseil mit Verbindung zum Hals</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Seil am Hals"> Seil am Hals</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Langes verweilen in der fertigen Bondage"> Langes verweilen in der fertigen Bondage</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Lederaugenbinde"> Lederaugenbinde</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Latexhaube (Augen, Mund, Nase frei)"> Latexhaube (Augen, Mund, Nase frei)</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Latexmaske (Mund, Nase frei)"> Latexmaske (Mund, Nase frei)</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Aufrecht auf Knien"> Aufrecht auf Knien</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Aufrecht auf Knien, fixiert über Hals und Decke"> Aufrecht auf Knien, fixiert über Hals und Decke</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Komplettfesselung ausgestreckt auf Boden"> Komplettfesselung ausgestreckt auf Boden</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Komplettfesselung stehend, fixiert an Stange"> Komplettfesselung stehend, fixiert an Stange</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Komplettfesselung stehend, fixiert über Hals und Decke"> Komplettfesselung stehend, fixiert über Hals und Decke</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="EscapeChallenge"> EscapeChallenge</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Rückmeldung am Körper durch Bewegungen in den Fesseln"> Rückmeldung am Körper durch Bewegungen in den Fesseln</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Statt Seile schwere Ketten, Schlösser und Hand- und Fußschellen"> Statt Seile schwere Ketten, Schlösser und Hand- und Fußschellen</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Verwendung der Gerte zur Motivation"> Verwendung der Gerte zur Motivation</label>

        <label><input type="checkbox" name="BondageOptionen[]" value="Mummification vollständig"> Mummification (vollständig)</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Mummification teilweise"> Mummification (teilweise / Oberkörper)</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Mummification mit Breathplay"> Mummification mit Breathplay-Elementen</label>

        <label><input type="checkbox" name="BondageOptionen[]" value="Sklavin Position"> Sklavin Position</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Sklavin Position devot"> Sklavin Position devot</label>

        <label><input type="checkbox" name="BondageOptionen[]" value="Suspension"> Suspension</label>
        <label><input type="checkbox" name="BondageOptionen[]" value="Suspension kopfüber"> Suspension kopfüber</label>

        <label><input type="checkbox" name="BondageOptionen[]" value="Anderes"> Anderes (bitte unten beschreiben)</label>
      </div>

      <label for="bondage_eigen">Eigener Wunsch / zusätzliche Bondage-Ideen</label>
      <textarea id="bondage_eigen" name="Bondage Eigener Wunsch" rows="3" placeholder=""></textarea>

      <div class="section-title">Material</div>
      <div class="checkbox-group">
        <label><input type="checkbox" name="Material[]" value="Ketten"> Ketten</label>
        <label><input type="checkbox" name="Material[]" value="Handschellen"> Handschellen</label>
        <label><input type="checkbox" name="Material[]" value="Lederriemen"> Lederriemen</label>
        <label><input type="checkbox" name="Material[]" value="Seile Weiß"> Seile Weiß</label>
        <label><input type="checkbox" name="Material[]" value="Seile Schwarz"> Seile Schwarz</label>
        <label><input type="checkbox" name="Material[]" value="Seile Rot"> Seile Rot</label>
      </div>

      <div class="section-title">X – EXTREME ERWEITERUNG</div>

      <div id="codeSection">
        <p style="margin-bottom: 0.8rem; color: #ffcc00;">Zugangscode erforderlich (4-stellig):</p>
        <input type="password" id="codeInput" placeholder="Code eingeben" maxlength="4" style="width: 120px; text-align: center;">
        <button type="button" id="checkCodeBtn">Code prüfen</button>
        <div id="codeError" class="error" style="margin-top: 0.5rem;">Falscher Code</div>
      </div>

      <div id="xContainer" style="display: none;">
        <div class="extreme-info">
          <strong>Wichtig:</strong> Dieser Block kann <strong>nur einmal</strong> geöffnet werden. Wenn du keine Auswahl triffst, schließt er sich nach 10 Sekunden automatisch und lässt sich danach <strong>nicht mehr öffnen</strong>. Wähle bewusst und schnell!
        </div>
        <label style="font-weight: bold; color: #ff4d4d;">
          <input type="checkbox" id="extremeX" name="Extreme[]" value="X">
          X – Ich möchte die extreme Erweiterung aktivieren
        </label>

        <div id="extremeOptions" class="extreme-warning">
          <strong style="color: #ff0000; font-size: 1.2rem;">Bist du dir wirklich sicher?</strong><br>
          Diese Auswahl ist extrem intensiv.
          <div class="checkbox-group" style="margin-top: 1rem;">
            <label><input type="checkbox" name="Extreme[]" value="PLUG Vaginal"> PLUG Vaginal</label>
            <label><input type="checkbox" name="Extreme[]" value="PLUG ANAL"> PLUG ANAL</label>
            <label><input type="checkbox" name="Extreme[]" value="HOOK ANAL"> HOOK ANAL</label>
            <label><input type="checkbox" name="Extreme[]" value="TIEFER ORAL KNEBEL"> TIEFER ORAL KNEBEL</label>
            <label><input type="checkbox" name="Extreme[]" value="Breathcontrol"> Breathcontrol</label>
            <label><input type="checkbox" name="Extreme[]" value="Leichte verbale Erniedrigung"> Leichte verbale Erniedrigung</label>
            <label><input type="checkbox" name="Extreme[]" value="Extreme Erniedrigung"> Extreme Erniedrigung</label>
            <label><input type="checkbox" name="Extreme[]" value="Nippelklammern"> Nippelklammern</label>
            <label><input type="checkbox" name="Extreme[]" value="Nippelklammern mit Zug"> Nippelklammern mit Zug</label>
            <label><input type="checkbox" name="Extreme[]" value="Leichte Nutzung der Gerte"> Leichte Nutzung der Gerte</label>
            <label><input type="checkbox" name="Extreme[]" value="Gesunde Nutzung der Gerte"> Gesunde Nutzung der Gerte</label>
            <label><input type="checkbox" name="Extreme[]" value="SklavinnenPositionen"> SklavinnenPositionen</label>
            <label><input type="checkbox" name="Extreme[]" value="Nackt"> Nackt</label>
            <label><input type="checkbox" name="Extreme[]" value="BRUSTBONDAGE Abbinden"> BRUSTBONDAGE Abbinden</label>
            <label><input type="checkbox" name="Extreme[]" value="Strangulation"> Strangulation</label>
            <label><input type="checkbox" name="Extreme[]" value="Käfig"> Käfig</label>
            <label><input type="checkbox" name="Extreme[]" value="Völligen Kontrollverlust"> Völligen Kontrollverlust</label>
            <label><input type="checkbox" name="Extreme[]" value="Training zur Sklavin"> Training zur Sklavin</label>
            <label><input type="checkbox" name="Extreme[]" value="härtere Gangart im Shooting"> härtere Gangart im Shooting</label>
            <label><input type="checkbox" name="Extreme[]" value="Öffnen aller Reißverschlüße"> Öffnen aller Reißverschlüße</label>
            <label><input type="checkbox" name="Extreme[]" value="Seile bzw. Ketten tief durch den Schritt gezogen"> Seile bzw. Ketten tief durch den Schritt gezogen</label>
            <label><input type="checkbox" name="Extreme[]" value="sehr lange verweildauer in der fertigen Bondage"> sehr lange verweildauer in der fertigen Bondage</label>
            <label><input type="checkbox" name="Extreme[]" value="Zwang zum Höhepunkt"> Zwang zum Höhepunkt</label>
            <label><input type="checkbox" name="Extreme[]" value="Verbot des Höhepunktes"> Verbot des Höhepunktes</label>
            <label><input type="checkbox" name="Extreme[]" value="Dildo"> Dildo</label>
            <label><input type="checkbox" name="Extreme[]" value="Vibrator"> Vibrator</label>
            <label><input type="checkbox" name="Extreme[]" value="Elektro Nippel"> Elektro Nippel</label>
            <label><input type="checkbox" name="Extreme[]" value="Elektro Vaginal"> Elektro Vaginal</label>
            <label><input type="checkbox" name="Extreme[]" value="Elektro Anal"> Elektro Anal</label>
            <label><input type="checkbox" name="Extreme[]" value="Halsband mit ElektroShock"> Halsband mit ElektroShock</label>
            <label><input type="checkbox" name="Extreme[]" value="Selfpenetration Vaginal"> Selfpenetration Vaginal</label>
            <label><input type="checkbox" name="Extreme[]" value="Selfpenetration Anal"> Selfpenetration Anal</label>
            <label><input type="checkbox" name="Extreme[]" value="Selfpenetration Oral"> Selfpenetration Oral</label>
          </div>

          <div id="countdown" style="margin-top: 1rem;">Block schließt sich in <span id="seconds">10</span> Sekunden...</div>
        </div>
      </div>

      <div class="section-title">Selbstdefinition (Mehrfachauswahl möglich)</div>
      <div class="checkbox-group">
        <label><input type="checkbox" name="Selbstdefinition[]" value="DEVOT"> DEVOT</label>
        <label><input type="checkbox" name="Selbstdefinition[]" value="STARK DEVOT"> STARK DEVOT</label>
        <label><input type="checkbox" name="Selbstdefinition[]" value="MASO"> MASO</label>
        <label><input type="checkbox" name="Selbstdefinition[]" value="STARK MASO"> STARK MASO</label>
      </div>

      <div class="section-title">SAFE WORD</div>
      <select id="safeword" name="Safe Word" required>
        <option value="" disabled selected>bitte wählen …</option>
        <option value="ROT; GELB; GRÜN">ROT; GELB; GRÜN</option>
        <option value="Kein Safeword">Kein Safeword</option>
      </select>

      <div id="noSafewordConfirmation">
        <div class="warning-text">WICHTIG – KEIN SAFEWORD</div>
        <p>Ich bestätige ausdrücklich und bewusst, kein Safeword haben zu wollen und bin mir aller Konsequenzen vollumfänglich bewusst.<br>
        <strong style="color: #ffcc00;">gibt es absolut keine Reaktion zum Befreien durch Schreie, Laute, Bewegungen oder ähnliches. Das gilt auch bei extremen Situationen!</strong></p>
        <label style="margin-top: 1rem; font-weight: bold; color: #ffcc00;">
          <input type="checkbox" id="confirmNoSafeword">
          Ja, ich bestätige das ausdrücklich und freiwillig
        </label>
      </div>

      <div class="section-title">ERKLÄRUNG zum Auswählen</div>
      <div class="checkbox-group">
        <label><input type="checkbox" name="Erklaerung[]" value="alles"> JA, Sklavin 666 macht alles was von ihr verlangt wird</label>
        <label><input type="checkbox" name="Erklaerung[]" value="demuetig"> Ja, Sklavin 666 macht demütig alles was von ihr verlangt wird</label>
      </div>

      <div id="anmerkungenSection">
        <label for="persoenliche_anmerkungen" style="font-weight: bold; color: #ff9999;">
          Persönliche Anmerkungen / Zusätzliche Wünsche / Notizen
        </label>
        <textarea id="persoenliche_anmerkungen" name="persoenliche_anmerkungen" rows="5" placeholder="Hier kannst du alles schreiben, was dir wichtig ist... (optional)"></textarea>
      </div>

      <button type="submit" id="submitBtn" disabled>Absenden</button>

    </form>

    <div id="successMsg" style="margin-top:2rem; padding:1.5rem; background:#1e1b2e; border:1px solid #ff0000; border-radius:8px; color:#d8b4fe; display:none;">
      <strong>Sklavin 666 hat die WISHLIST erfolgreich abgesendet.<br><br>
      Auswertung<br>
      Sklavin 666 ist eine extrem devote Masochistin.<br>
      Ihre Neigungen sind stark ausgeprägt.<br><br>
      Die Wünsche werden berücksichtigt!<br><br>
      KEIN SAFEWORD<br><br>
      TUT DEMÜTIG ALLES!!<br><br>
      EINSATZ DER GERTE<br><br>
      Ausgewählte extreme Optionen:<br>
      <span id="extremeList"></span><br><br>
      !!!Anweisung an Sklavin 666!!!<br>
      Sklavin 666 erscheint stets devot, geschminkt, entleerter Blase, vollrasiert und komplett (innen) gewaschen zum Termin.<br>
      Sklavin 666 nimmt die Sklavinposition ein!!!!.</strong>
    </div>

  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {

      const form = document.getElementById('wishlistForm');
      const submitBtn = document.getElementById('submitBtn');
      const success = document.getElementById('successMsg');
      const extremeList = document.getElementById('extremeList');
      const extremeHidden = document.getElementById('extreme_options_hidden');

      const rolleRadios      = document.querySelectorAll('input[name="Rolle"]');
      const safewordSelect   = document.getElementById('safeword');
      const confirmNoSafeword = document.getElementById('confirmNoSafeword');
      const noSafewordDiv    = document.getElementById('noSafewordConfirmation');
      const erklaerungBoxes  = document.querySelectorAll('input[name="Erklaerung[]"]');

      const codeInput        = document.getElementById('codeInput');
      const checkCodeBtn     = document.getElementById('checkCodeBtn');
      const codeError        = document.getElementById('codeError');
      const codeSection      = document.getElementById('codeSection');
      const xContainer       = document.getElementById('xContainer');
      const extremeX         = document.getElementById('extremeX');
      const extremeOptions   = document.getElementById('extremeOptions');
      const countdownEl      = document.getElementById('countdown');
      const secondsEl        = document.getElementById('seconds');

      const rolleError = document.getElementById('rolleError');

      let countdownTimer = null;
      let extremeOpenedOnce = false;
      let timeLeft = 10;

      if (!safewordSelect) console.warn('Element mit id="safeword" wurde nicht gefunden!');

      if (checkCodeBtn) {
        checkCodeBtn.addEventListener('click', () => {
          if (codeInput && codeInput.value === '2106') {
            codeSection.style.display = 'none';
            xContainer.style.display = 'block';
            if (codeError) codeError.style.display = 'none';
          } else if (codeError) {
            codeError.style.display = 'block';
          }
        });
      }

      if (codeInput) {
        codeInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') checkCodeBtn.click();
        });
      }

      function startCountdown() {
        if (countdownTimer) clearInterval(countdownTimer);

        timeLeft = 10;
        if (secondsEl) secondsEl.textContent = timeLeft;
        if (countdownEl) countdownEl.style.display = 'block';

        countdownTimer = setInterval(() => {
          timeLeft--;
          if (secondsEl) secondsEl.textContent = timeLeft;

          if (timeLeft <= 0) {
            clearInterval(countdownTimer);
            if (countdownEl) countdownEl.style.display = 'none';
            if (extremeX) extremeX.checked = false;
            if (extremeOptions) extremeOptions.style.display = 'none';
            if (extremeX) extremeX.disabled = true;
            extremeOpenedOnce = true;
            validateAndUpdateButton();
          }
        }, 1000);
      }

      function validateAndUpdateButton() {
        let valid = true;

        let rolle = document.querySelector('input[name="Rolle"]:checked')?.value;
        if (rolle === 'DOMINANT') {
          if (rolleError) {
            rolleError.textContent = "Falsche Eingabe von Sklavin 666";
            rolleError.style.display = 'block';
          }
          valid = false;
        } else if (rolle && rolleError) {
          rolleError.style.display = 'none';
        }

        const sw = safewordSelect ? safewordSelect.value : '';
        if (noSafewordDiv) noSafewordDiv.classList.toggle('show', sw === 'Kein Safeword');
        if (sw === 'Kein Safeword' && confirmNoSafeword && !confirmNoSafeword.checked) {
          valid = false;
        }

        let erkCount = 0;
        erklaerungBoxes.forEach(cb => { if (cb.checked) erkCount++; });
        if (erkCount < 1) valid = false;

        if (extremeX && extremeX.checked && !extremeOpenedOnce) {
          if (extremeOptions) extremeOptions.style.display = 'block';
        } else {
          if (extremeOptions) extremeOptions.style.display = 'none';
          if (countdownEl) countdownEl.style.display = 'none';
          if (countdownTimer) clearInterval(countdownTimer);
        }

        if (submitBtn) submitBtn.disabled = !valid;
      }

      rolleRadios.forEach(r => r.addEventListener('change', validateAndUpdateButton));
      if (safewordSelect) safewordSelect.addEventListener('change', validateAndUpdateButton);
      if (confirmNoSafeword) confirmNoSafeword.addEventListener('change', validateAndUpdateButton);
      erklaerungBoxes.forEach(c => c.addEventListener('change', validateAndUpdateButton));

      if (extremeX) {
        extremeX.addEventListener('change', () => {
          if (extremeX.checked) {
            if (extremeOpenedOnce) {
              extremeX.checked = false;
              alert("X kann nur einmal geöffnet werden.");
              return;
            }
            if (extremeOptions) extremeOptions.style.display = 'block';
            let anyExtremeChecked = false;
            document.querySelectorAll('input[name="Extreme[]"]').forEach(cb => {
              if (cb !== extremeX && cb.checked) anyExtremeChecked = true;
            });
            if (!anyExtremeChecked) {
              startCountdown();
            }
          } else {
            if (extremeOptions) extremeOptions.style.display = 'none';
            if (countdownEl) countdownEl.style.display = 'none';
            if (countdownTimer) clearInterval(countdownTimer);
          }
          validateAndUpdateButton();
        });
      }

      document.querySelectorAll('#extremeOptions input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          if (this.checked && countdownTimer) {
            timeLeft += 5;
            if (secondsEl) secondsEl.textContent = timeLeft;
          }
          if (this.checked) {
            this.disabled = true;
          }
        });
      });

      validateAndUpdateButton();

      if (form) {
        form.addEventListener('submit', async function(e) {
          e.preventDefault();

          validateAndUpdateButton();

          if (submitBtn && submitBtn.disabled) {
            alert("Bitte alle Pflichtfelder ausfüllen und Regeln akzeptieren.");
            return;
          }

          // Sammle alle ausgewählten Extreme-Optionen (Labels)
          const extremeSelected = [];
          document.querySelectorAll('#extremeOptions input[type="checkbox"]:checked').forEach(cb => {
            if (cb.value !== 'X') { // Haupt-Checkbox "X" ausschließen
              const labelText = cb.parentElement.textContent.trim();
              extremeSelected.push(labelText);
            }
          });

          // Für die E-Mail: Komma-separierte Liste in verstecktes Feld schreiben
          if (extremeHidden) {
            extremeHidden.value = extremeSelected.length > 0 
              ? extremeSelected.join(', ') 
              : 'Keine extremen Optionen ausgewählt';
          }

          // Für die sichtbare Erfolgsmeldung (optional, aber schön zur Kontrolle)
          if (extremeList) {
            if (extremeSelected.length > 0) {
              extremeList.innerHTML = extremeSelected.map(item => '• ' + item).join('<br>');
            } else {
              extremeList.innerHTML = '(keine extremen Optionen ausgewählt)';
            }
          }

          try {
            const formData = new FormData(form);
            const response = await fetch(form.action, {
              method: 'POST',
              body: formData,
              headers: { 'Accept': 'application/json' }
            });

            if (response.ok) {
              form.reset();
              if (noSafewordDiv) noSafewordDiv.classList.remove('show');
              if (extremeOptions) extremeOptions.style.display = 'none';
              if (countdownEl) countdownEl.style.display = 'none';
              if (countdownTimer) clearInterval(countdownTimer);
              if (submitBtn) submitBtn.disabled = true;
              if (success) success.style.display = 'block';
              if (form) form.style.display = 'none';
            } else {
              alert("Fehler beim Senden – bitte später nochmal versuchen.");
            }
          } catch (err) {
            alert("Verbindungsproblem – bitte später nochmal versuchen.");
          }
        });
      }

    });
  </script>

</body>
</html>
